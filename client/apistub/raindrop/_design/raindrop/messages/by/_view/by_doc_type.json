{"total_rows":2439,"offset":589,"rows":[
{"id":"msg!cmhpbm8jMjA=!message","key":"message","value":"1-964350592","doc":{"_id":"msg!cmhpbm8jMjA=!message","_rev":"1-964350592","body":"On May 28, 8:27 am, tgad...@gmail.com wrote:\r\n> Hey all,\r\n>\r\n> A small question, I'm using java's serial communication\r\n> (gnu.io.SerialPort) from Javascript, I have succesfully made a serial\r\n> connection but I would like to add an event listener to it, and have\r\n> it execute a javascript function when data becomes available in the\r\n> serial port. One of the things I've tried is the following code, but\r\n> this does not work. Does anyone here have experience with such a\r\n> thing? Any help would be greatly appreciated!\r\n>\r\n> (javascript)\r\n>\r\n> port.notifyOnDataAvailable = true;\r\n> port.addEventListener(function() {\r\n>\r\n>             print(\"Data is here\");\r\n>\r\n>     });\r\n>\r\n> Kind Regards,\r\n> Thijs.\r\n\r\nLooking up this class, I see that gnu.io.SerialPort.addEventListener\r\nexpects a gnu.io.SerialPortEventListener. So you need an object of\r\nthat class. Rhino supports implementing Java interfaces using\r\nJavaScript objects. I think the following should work (I haven't tried\r\nit):\r\n  port.addEventListener(new\r\ngnu.io.SerialPortEventListener( { serialEvent: function\r\n(serialPortEvent ) { ... } ) );\r\n\r\n--Norris\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","Norris Boyd <norrisboyd@gmail.com>"],"raindrop_seq":1239213493.733308,"type":"message","body_preview":"On May 28, 8:27 am, tgad...@gmail.com wrote:\r\n> Hey all,\r\n>\r\n> A small question, I'm using java's serial communication\r\n> (gnu.i","subject":"Re: SerialPortEventListener in Javascript"}},
{"id":"msg!cmhpbm8jMjc=!message","key":"message","value":"1-1158866755","doc":{"_id":"msg!cmhpbm8jMjc=!message","_rev":"1-1158866755","body":"Maybe I should explain in more detail what I would like to achive.\r\n\r\nI'd like to parse a source-file (HTML file with JavaScript embedded in\r\nASP-like fashion) with a custom HTML parser.\r\n\r\nI want to have a string (or Reader or something, really doesn't\r\nmatter) that I can append JavaScript source to as I pick it up in my\r\nHTML source.\r\nI want to have a tree-representation of the JavaScript source (I\r\nbelieve this is already being build in Rhino parsing), but it should\r\nbe build piece-by-piece as I append more and more JavaScript to the\r\nJavaScript string.\r\n\r\nAs I parse my HTML, everytime I bump into a \"<% ... %>\" syntax I will\r\nget the content between <% and %> and append it to the string\r\ncontaining the previous <%...%> sections. This should also append the\r\ncorrect sub-tree to the tree-representation.\r\nEvery time I get to a \"%>\" in the HTML source and after I've appended\r\nthe content to the string and the tree has been updated I need to do\r\nthe following:\r\n\r\na) Check that the combined JavaScript - so far - is correct if you\r\nlook at the syntax.\r\nb) Check if I'm now inside a function, a for-loop inside af while-loop\r\ninside a function etc.\r\nc) Check if any errors in the - so far - parsed JavaScript, and if it\r\nhas then get line-number and possible column-number etc.\r\n\r\nAs I parse the HTML and the JavaScript <%...%> sections and append to\r\nthe string and the tree the JavaScript will eventually (if no errors\r\nof course) contain a complete and working JavaScript context.\r\n\r\nPlease note that everytime I get the content inside <%...%> it could\r\ncontain fx. \"for (i = 0; i < 10; i++) {\" with no ending \"}\", but as\r\nI'm not at the end of the HTML then this is - so far - correct syntax,\r\nso no errors should be shown here.\r\n\r\nIs the above duable with Rhino or do I have to build my own JavaScript\r\nparser - which I'd rather not :-D If it is not possible with Rhino,\r\ndoes someone know of a person that could build a custom parser for me\r\n(based on the Rhino, so that improvements could easily be added in the\r\nfuture)? Thanks!\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","kimhansen4@sol.dk"],"raindrop_seq":1239213493.733566,"type":"message","body_preview":"Maybe I should explain in more detail what I would like to achive.\r\n\r\nI'd like to parse a source-file (HTML file with JavaScript","subject":"Re: Parse JavaScript one token at a time?"}},
{"id":"msg!cmhpbm8jMjE=!message","key":"message","value":"1-1545893712","doc":{"_id":"msg!cmhpbm8jMjE=!message","_rev":"1-1545893712","body":"Hey all,\r\n\r\nA small question, I'm using java's serial communication\r\n(gnu.io.SerialPort) from Javascript, I have succesfully made a serial\r\nconnection but I would like to add an event listener to it, and have\r\nit execute a javascript function when data becomes available in the\r\nserial port. One of the things I've tried is the following code, but\r\nthis does not work. Does anyone here have experience with such a\r\nthing? Any help would be greatly appreciated!\r\n\r\n(javascript)\r\n\r\nport.notifyOnDataAvailable = true;\r\nport.addEventListener(function() {\r\n\r\n            print(\"Data is here\");\r\n\r\n    });\r\n\r\nKind Regards,\r\nThijs.\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","tgadiot@gmail.com"],"raindrop_seq":1239213493.732679,"type":"message","body_preview":"Hey all,\r\n\r\nA small question, I'm using java's serial communication\r\n(gnu.io.SerialPort) from Javascript, I have succesfully mad","subject":"SerialPortEventListener in Javascript"}},
{"id":"msg!cmhpbm8jMjg=!message","key":"message","value":"1-3141892882","doc":{"_id":"msg!cmhpbm8jMjg=!message","_rev":"1-3141892882","body":"Hi!\r\n\r\nI was wondering if it is possible using either the Mozilla Rhino or\r\nmaybe the version embedded in Java 1.6 (javax.script.*) to parse a\r\nJavaScript source file one token at a time?\r\n\r\nThe reason I need to parse one token at a time is because the\r\nJavaScript will be embedded using an ASP-style syntax in a HTML\r\nsource. So I have to switch between parsing HTML and JavaScript.\r\n\r\nIs this possible and could someone suggest how I could do it?\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","kimhansen4@sol.dk"],"raindrop_seq":1239213493.732964,"type":"message","body_preview":"Hi!\r\n\r\nI was wondering if it is possible using either the Mozilla Rhino or\r\nmaybe the version embedded in Java 1.6 (javax.script","subject":"Parse JavaScript one token at a time?"}},
{"id":"msg!cmhpbm8jMjI=!message","key":"message","value":"1-2495399179","doc":{"_id":"msg!cmhpbm8jMjI=!message","_rev":"1-2495399179","body":"Hi,\r\n\r\nI decided to use something like this.\r\n\r\neval(read(\"file.js\"));\r\n\r\nI was thinking of extending a java class and using the behaviour\r\nacross the scripts.\r\n\r\n\r\nThanks,\r\nMohan\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","radhakrishnan.mohan@gmail.com"],"raindrop_seq":1239213493.732877,"type":"message","body_preview":"Hi,\r\n\r\nI decided to use something like this.\r\n\r\neval(read(\"file.js\"));\r\n\r\nI was thinking of extending a java class and using the","subject":"Re: Understanding Rhino by debugging Context, Scopes"}},
{"id":"msg!cmhpbm8jMjk=!message","key":"message","value":"1-2018921204","doc":{"_id":"msg!cmhpbm8jMjk=!message","_rev":"1-2018921204","body":"On Jun 9, 10:03 am, Norris Boyd <norrisb...@gmail.com> wrote:\r\n> On Jun 8, 12:06 pm, Frank <no-spam...@t-online.de> wrote:\r\n>\r\n>\r\n>\r\n> > Hi group,\r\n>\r\n> > I'm simply trying to do get the subject's matter running ... and fail. I\r\n> > googled 2 pieces for this and both don't work.\r\n>\r\n> > Using this:\r\n>\r\n> > var tableModel = new AbstractTableModel() {\r\n> >      getRowCount: function() { return 2; },\r\n> >      getColumnCount: function() { return 2; },\r\n> >      getValueAt: function(row, column) {\r\n> >          return \"ABC\";\r\n> >      }};\r\n>\r\n> > var jTable = new JTable(tableModel);\r\n>\r\n> > results in this:\r\n>\r\n> > Exception in thread \"main\" java.lang.AbstractMethodError:\r\n> > adapter1.getColumnCount()I\r\n> >          at javax.swing.JTable.createDefaultColumnsFromModel(Unknown Source)\r\n> >          at javax.swing.JTable.tableChanged(Unknown Source)\r\n> >          at javax.swing.JTable.setModel(Unknown Source)\r\n> >          at javax.swing.JTable.<init>(Unknown Source)\r\n> >          at javax.swing.JTable.<init>(Unknown Source)\r\n> >          at\r\n> > sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n> >          at\r\n> > sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\r\n> >          at\r\n> > sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\r\n> >          at java.lang.reflect.Constructor.newInstance(Unknown Source)\r\n> >          at org.mozilla.javascript.MemberBox.newInstance(MemberBox.java:184)\r\n> >          at\r\n> > org.mozilla.javascript.NativeJavaClass.constructSpecific(NativeJavaClass.java:274)\r\n> >          at\r\n> > org.mozilla.javascript.NativeJavaClass.construct(NativeJavaClass.java:193)\r\n> >          at\r\n> > org.mozilla.javascript.Interpreter.interpretLoop(Interpreter.java:3380)\r\n> >          at\r\n> > ...\r\n>\r\n> > Same error also for:\r\n>\r\n> > var tableModel = new JavaAdapter(AbstractTableModel, {\r\n> >      getRowCount: function() { return 2; },\r\n> >      getColumnCount: function() { return 2; },\r\n> >      getValueAt: function(row, column) {\r\n> >          return \"ABC\";\r\n> >      }});\r\n>\r\n> > var jTable = new JTable(tableModel);\r\n>\r\n> > Any help is appreciated.\r\n>\r\n> > Thanks in advance, Frank\r\n>\r\n> > Btw.: thanks also for the great work with Rhino!\r\n>\r\n> This looks like a bug. I've createdhttps://bugzilla.mozilla.org/show_bug.cgi?id=437988\r\n> and will try to look at it soon.\r\n>\r\n> --N\r\n\r\nI just committed a fix to CVS. The problem was that Rhino wasn't\r\ndiscovering abstract methods if they were only defined in interfaces\r\nof base classes rather than the base classes themselves.\r\n\r\n--N\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","Norris Boyd <norrisboyd@gmail.com>"],"raindrop_seq":1239213493.788318,"type":"message","body_preview":"On Jun 9, 10:03 am, Norris Boyd <norrisb...@gmail.com> wrote:\r\n> On Jun 8, 12:06 pm, Frank <no-spam...@t-online.de> wrote:\r\n>\r\n>","subject":"Re: Extending AbstractTableModel in Rhino1_7R1"}},
{"id":"msg!cmhpbm8jMjM=!message","key":"message","value":"1-1312206693","doc":{"_id":"msg!cmhpbm8jMjM=!message","_rev":"1-1312206693","body":"Hi,\r\n\r\n        I am really new to Rhino. So this question might not make\r\nsense.\r\n\r\n        I have a script running in a proprietary product. Now I want\r\nto understand how this script is loaded by the Java product.\r\n\r\n        Can I\r\n\r\n        1. Print the 'Context' information ?\r\n        2. Find out the scope information ?\r\n        3. Find out based on the above two how to share\r\ncode( functions, variables) based on scopes between seemingly\r\nindependent scripts ?\r\n        4. Find out how the scopes affect the way I extend a Java\r\nclass in one script and access it in another script.\r\n\r\n       Actually all of these Rhino scripts and Java objects are linked\r\nin memory somewhere.\r\n\r\n        Basically I want to understand how Rhino concepts are used by\r\nput debugging info. in the Rhino script itself. I do not have access\r\nto the shell etc. ?\r\n\r\nThanks,\r\nMohan\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","radhakrishnan.mohan@gmail.com"],"raindrop_seq":1239213493.733865,"type":"message","body_preview":"Hi,\r\n\r\n        I am really new to Rhino. So this question might not make\r\nsense.\r\n\r\n        I have a script running in a proprie","subject":"Understanding Rhino by debugging Context, Scopes"}},
{"id":"msg!cmhpbm8jMjQ=!message","key":"message","value":"1-475723985","doc":{"_id":"msg!cmhpbm8jMjQ=!message","_rev":"1-475723985","body":"On Jun 5, 7:24 pm, Nam Tuan Nguyen <namt...@gmail.com> wrote:\r\n> I could not find it on this page:http://www.mozilla.org/rhino/changes.html\r\n> Going through diffs is too much info.  I would like to see some\r\n> description/summary of the new features and major changes.\r\n>\r\n> Thanks,\r\n>\r\n> -Nam\r\n\r\nIt's here: http://developer.mozilla.org/en/docs/New_in_Rhino_1.7R1.\r\nThe page you link to is obsolete; I'll clean things up.\r\n\r\n--N\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","Norris Boyd <norrisboyd@gmail.com>"],"raindrop_seq":1239213493.733946,"type":"message","body_preview":"On Jun 5, 7:24 pm, Nam Tuan Nguyen <namt...@gmail.com> wrote:\r\n> I could not find it on this page:http://www.mozilla.org/rhino/c","subject":"Re: Where is 1_7R1 change log?"}},
{"id":"msg!cmhpbm8jMjU=!message","key":"message","value":"1-3943002999","doc":{"_id":"msg!cmhpbm8jMjU=!message","_rev":"1-3943002999","body":"I could not find it on this page:\r\nhttp://www.mozilla.org/rhino/changes.html\r\nGoing through diffs is too much info.  I would like to see some \r\ndescription/summary of the new features and major changes.\r\n\r\nThanks,\r\n\r\n-Nam\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","Nam Tuan Nguyen <namtuan@gmail.com>"],"raindrop_seq":1239213493.73348,"type":"message","body_preview":"I could not find it on this page:\r\nhttp://www.mozilla.org/rhino/changes.html\r\nGoing through diffs is too much info.  I would lik","subject":"Where is 1_7R1 change log?"}},
{"id":"msg!cmhpbm8jMjY=!message","key":"message","value":"1-1077584754","doc":{"_id":"msg!cmhpbm8jMjY=!message","_rev":"1-1077584754","body":"On Jun 9, 6:06 am, kimhans...@sol.dk wrote:\r\n> Maybe I should explain in more detail what I would like to achive.\r\n>\r\n> I'd like to parse a source-file (HTML file with JavaScript embedded in\r\n> ASP-like fashion) with a custom HTML parser.\r\n>\r\n> I want to have a string (or Reader or something, really doesn't\r\n> matter) that I can append JavaScript source to as I pick it up in my\r\n> HTML source.\r\n> I want to have a tree-representation of the JavaScript source (I\r\n> believe this is already being build in Rhino parsing), but it should\r\n> be build piece-by-piece as I append more and more JavaScript to the\r\n> JavaScript string.\r\n>\r\n> As I parse my HTML, everytime I bump into a \"<% ... %>\" syntax I will\r\n> get the content between <% and %> and append it to the string\r\n> containing the previous <%...%> sections. This should also append the\r\n> correct sub-tree to the tree-representation.\r\n> Every time I get to a \"%>\" in the HTML source and after I've appended\r\n> the content to the string and the tree has been updated I need to do\r\n> the following:\r\n>\r\n> a) Check that the combined JavaScript - so far - is correct if you\r\n> look at the syntax.\r\n> b) Check if I'm now inside a function, a for-loop inside af while-loop\r\n> inside a function etc.\r\n> c) Check if any errors in the - so far - parsed JavaScript, and if it\r\n> has then get line-number and possible column-number etc.\r\n>\r\n> As I parse the HTML and the JavaScript <%...%> sections and append to\r\n> the string and the tree the JavaScript will eventually (if no errors\r\n> of course) contain a complete and working JavaScript context.\r\n>\r\n> Please note that everytime I get the content inside <%...%> it could\r\n> contain fx. \"for (i = 0; i < 10; i++) {\" with no ending \"}\", but as\r\n> I'm not at the end of the HTML then this is - so far - correct syntax,\r\n> so no errors should be shown here.\r\n>\r\n> Is the above duable with Rhino or do I have to build my own JavaScript\r\n> parser - which I'd rather not :-D If it is not possible with Rhino,\r\n> does someone know of a person that could build a custom parser for me\r\n> (based on the Rhino, so that improvements could easily be added in the\r\n> future)? Thanks!\r\n\r\nProbably the easiest approach to this with Rhino is to use\r\norg.mozilla.javascript.Context.stringIsCompilableUnit(String). This\r\nmethod takes a string containing JavaScript source and returns true if\r\nthe source is compilable as it is. This method is used by the shell to\r\ndetermine whether to prompt for more input when the user presses\r\nenter. You could call stringIsCompilableUnit when you see %> and if it\r\nreturns false, assume that you're in the middle of a loop. In that\r\ncase you could then insert code into the JavaScript source that would\r\nevaluate to the HTML text between the %> and the next <%. Then when\r\nyou evaluate the script when you've processed the entire file, it\r\nshould do what you want.\r\n\r\nFor example, the input might be\r\n\r\n<html>\r\n<body>\r\n<%\r\n   for (var i=0; i < 10; i++) {\r\n%>\r\n    Hello, world!<br>\r\n<%\r\n  }\r\n%>\r\n</body>\r\n</html>\r\n\r\nAnd the resulting script might be\r\n\r\nwriteToResponse(sourceSnippet[0]);\r\nfor (var i=0; i < 10; i++) {\r\n  writeToResponse(sourceSnippet[1]);\r\n}\r\nwriteToResponse(sourceSnippet[2]);\r\n\r\n--N\r\n\r\n--N\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","Norris Boyd <norrisboyd@gmail.com>"],"raindrop_seq":1239213493.73375,"type":"message","body_preview":"On Jun 9, 6:06 am, kimhans...@sol.dk wrote:\r\n> Maybe I should explain in more detail what I would like to achive.\r\n>\r\n> I'd like","subject":"Re: Parse JavaScript one token at a time?"}},
{"id":"msg!cmhpbm8jMQ==!message","key":"message","value":"1-4131631694","doc":{"_id":"msg!cmhpbm8jMQ==!message","_rev":"1-4131631694","body":"Thanks to James Burke for raising this, and to Attila for providing such \r\nan informative reply. This is a very useful thread for me - I'm doing \r\nthe same thing setting up a servlet to invoke various scripts which need \r\naccess to the same objects and resources.\r\n\r\nI imagine that this is a very common use of Rhino. Would it be a good \r\nidea to provide a sort of \"Reference\" servlet as part of the distribution?\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","Josh <josh@laculine.com>"],"raindrop_seq":1239213493.5699,"type":"message","body_preview":"Thanks to James Burke for raising this, and to Attila for providing such \r\nan informative reply. This is a very useful thread fo","subject":"Re: Best way to use Rhino with servlets"}},
{"id":"msg!cmhpbm8jMTA=!message","key":"message","value":"1-59231632","doc":{"_id":"msg!cmhpbm8jMTA=!message","_rev":"1-59231632","body":"Well, you can use a custom ContextFactory that creates Context  \r\ninstances with a WrapFactory configured for not wrapping primitives.  \r\nThat way you extracted it in a single place and needn't bother with it  \r\nwhenever you enter a Context.\r\n\r\nAttila.\r\n\r\nOn 2008.05.22., at 15:33, Kris Zyp wrote:\r\n\r\n> Is there any way to make Rhino globally default to not wrapping Java\r\n> primitives (String, Number, Boolean, and Character)? It appears that\r\n> you\r\n> disable this per Context by getting the WrapFactory and calling\r\n> setJavaPrimitiveWrap(false). It seems like one would want this to\r\n> normally\r\n> be false, and have it default to false without having to set it to\r\n> false for\r\n> the WrapFactory for each Context. Getting a NativeJavaObject as the\r\n> result\r\n> of a method that is supposed to return a string is rather surprising\r\n> to me.\r\n> Is there a reason why this defaults to true? Is there a way to make\r\n> it\r\n> globally default to false?\r\n> Thanks,\r\n> Kris\r\n\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","Attila Szegedi <szegedia@gmail.com>"],"raindrop_seq":1239213493.569744,"type":"message","body_preview":"Well, you can use a custom ContextFactory that creates Context  \r\ninstances with a WrapFactory configured for not wrapping primi","subject":"Re: javaPrimitiveWrap"}},
{"id":"msg!cmhpbm8jMTc=!message","key":"message","value":"1-952969686","doc":{"_id":"msg!cmhpbm8jMTc=!message","_rev":"1-952969686","body":"Thanks again for the reply, the example with the Thread works indeed.\r\nAnd (maybe a silly question) is the code that is calling the event\r\nhandler in the java package?\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","nition <tgadiot@gmail.com>"],"raindrop_seq":1239213493.733652,"type":"message","body_preview":"Thanks again for the reply, the example with the Thread works indeed.\r\nAnd (maybe a silly question) is the code that is calling ","subject":"Re: SerialPortEventListener in Javascript"}},
{"id":"msg!cmhpbm8jMTE=!message","key":"message","value":"1-2492446465","doc":{"_id":"msg!cmhpbm8jMTE=!message","_rev":"1-2492446465","body":"Is there any way to make Rhino globally default to not wrapping Java\r\nprimitives (String, Number, Boolean, and Character)? It appears that\r\nyou\r\ndisable this per Context by getting the WrapFactory and calling\r\nsetJavaPrimitiveWrap(false). It seems like one would want this to\r\nnormally\r\nbe false, and have it default to false without having to set it to\r\nfalse for\r\nthe WrapFactory for each Context. Getting a NativeJavaObject as the\r\nresult\r\nof a method that is supposed to return a string is rather surprising\r\nto me.\r\nIs there a reason why this defaults to true? Is there a way to make\r\nit\r\nglobally default to false?\r\nThanks,\r\nKris\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","Kris Zyp <kriszyp@gmail.com>"],"raindrop_seq":1239213493.570363,"type":"message","body_preview":"Is there any way to make Rhino globally default to not wrapping Java\r\nprimitives (String, Number, Boolean, and Character)? It ap","subject":"javaPrimitiveWrap"}},
{"id":"msg!cmhpbm8jMTg=!message","key":"message","value":"1-2190946722","doc":{"_id":"msg!cmhpbm8jMTg=!message","_rev":"1-2190946722","body":"On May 28, 1:44 pm, nition <tgad...@gmail.com> wrote:\r\n> Thank you for your reply, Norris. I've added another curly brace, and\r\n> tested the code, but when serial information comes in the event is not\r\n> triggered. I'm not getting any errors whatsoever, is there any way to\r\n> debug this?\r\n\r\nWell, the equivalent JavaScript works for a simple example:\r\n\r\njs> var t = new java.lang.Thread(new java.lang.Runnable(\r\n  >   { run: function () { print(\"running\"); } }\r\n  > ));\r\njs> t.run();\r\nrunning\r\n\r\nso I'd suspect the code that should be calling the event handler.\r\n\r\n--N\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","Norris Boyd <norrisboyd@gmail.com>"],"raindrop_seq":1239213493.733222,"type":"message","body_preview":"On May 28, 1:44 pm, nition <tgad...@gmail.com> wrote:\r\n> Thank you for your reply, Norris. I've added another curly brace, and\r\n","subject":"Re: SerialPortEventListener in Javascript"}},
{"id":"msg!cmhpbm8jMTI=!message","key":"message","value":"1-1884655553","doc":{"_id":"msg!cmhpbm8jMTI=!message","_rev":"1-1884655553","body":"On May 27, 1:05\u00a0pm, ktm <kit.mccorm...@gmail.com> wrote:\r\n> This only works as expected if I remove the hyphen from the\r\n> reservation-request:\r\n>\r\n> var baseDocument =\r\n> \u00a0 \u00a0 <create-reservation-request>\r\n> \u00a0 \u00a0 \u00a0 \u00a0<reservation-request>\r\n> \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 <product><id>XXX</id></product>\r\n> \u00a0 \u00a0 \u00a0 \u00a0</reservation-request>\r\n> \u00a0 \u00a0 </create-reservation-request>\r\n>\r\n> print(baseDocument.reservation-request.product[0]);\r\n>\r\n> With the hyphen, I get this:\r\n> script error in file createReservation.js :\r\n> org.mozilla.javascript.EcmaError: ReferenceError: \"request\" is not\r\n> defined.\r\n>\r\n> I think the interpreter is trying to subtract request from\r\n> reservation. \u00a0Is this a bug in rhino (using 1_7R1), or am I not\r\n> supposed to have hyphens in my tags?\r\n\r\nYou're right that the '-' in the argument to print is interpreted as a\r\nminus. Rhino is correct; identifier names outside of XML literals must\r\nfollow normal JavaScript rules. You can use [] instead of '.' to work\r\naround this rule:\r\n\r\njs> print(baseDocument[\"reservation-request\"].product[0]);\r\n<product>\r\n  <id>XXX</id>\r\n</product>\r\n\r\n--N\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","Norris Boyd <norrisboyd@gmail.com>"],"raindrop_seq":1239213493.570518,"type":"message","body_preview":"On May 27, 1:05\u00a0pm, ktm <kit.mccorm...@gmail.com> wrote:\r\n> This only works as expected if I remove the hyphen from the\r\n> reser","subject":"Re: Noob vs hyphens"}},
{"id":"msg!cmhpbm8jMTk=!message","key":"message","value":"1-967792687","doc":{"_id":"msg!cmhpbm8jMTk=!message","_rev":"1-967792687","body":"Thank you for your reply, Norris. I've added another curly brace, and\r\ntested the code, but when serial information comes in the event is not\r\ntriggered. I'm not getting any errors whatsoever, is there any way to\r\ndebug this?\r\n\r\n\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","nition <tgadiot@gmail.com>"],"raindrop_seq":1239213493.732788,"type":"message","body_preview":"Thank you for your reply, Norris. I've added another curly brace, and\r\ntested the code, but when serial information comes in the","subject":"Re: SerialPortEventListener in Javascript"}},
{"id":"msg!cmhpbm8jMTM=!message","key":"message","value":"1-506197672","doc":{"_id":"msg!cmhpbm8jMTM=!message","_rev":"1-506197672","body":"This only works as expected if I remove the hyphen from the\r\nreservation-request:\r\n\r\nvar baseDocument =\r\n    <create-reservation-request>\r\n       <reservation-request>\r\n          <product><id>XXX</id></product>\r\n       </reservation-request>\r\n    </create-reservation-request>\r\n\r\nprint(baseDocument.reservation-request.product[0]);\r\n\r\nWith the hyphen, I get this:\r\nscript error in file createReservation.js :\r\norg.mozilla.javascript.EcmaError: ReferenceError: \"request\" is not\r\ndefined.\r\n\r\nI think the interpreter is trying to subtract request from\r\nreservation.  Is this a bug in rhino (using 1_7R1), or am I not\r\nsupposed to have hyphens in my tags?\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","ktm <kit.mccormick@gmail.com>"],"raindrop_seq":1239213493.569508,"type":"message","body_preview":"This only works as expected if I remove the hyphen from the\r\nreservation-request:\r\n\r\nvar baseDocument =\r\n    <create-reservation","subject":"Noob vs hyphens"}},
{"id":"msg!cmhpbm8jMTQ=!message","key":"message","value":"1-3531696130","doc":{"_id":"msg!cmhpbm8jMTQ=!message","_rev":"1-3531696130","body":"> I would be interested in seeing this code once things were working.\r\n> \"Nition\" would you be willing to post it? Thanks in advance.\r\n\r\nI ofcourse am willing to do so. I havent figured out where the problem\r\nis though, the environment which I was writing the code for is\r\nScriptographer, a programming plugin for Adobe Illustrator. I've\r\ntested it on three of my computers (all Apple, a powermac g4, a\r\npowermac g5 and a dual-core intel, one with osx 10.4 the others with\r\nosx 10.5) and they reacted differently. The event was not triggered at\r\nall on the powermac g4 (osx 10.5) and the powermac g4 (osx 10.4), but\r\nwas triggered continuously on the powermac g5, while it should trigger\r\nonce. The programmer of this plugin did get things to work, although\r\nhe could unfortunatly not assist me in getting things going. What is\r\nimportant anyway is to have  \"port.notifyOnDataAvailable = true;\" in\r\nyour code.\r\n\r\nGood luck!\r\nThijs.\r\n\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","nition <tgadiot@gmail.com>"],"raindrop_seq":1239213493.84477,"type":"message","body_preview":"> I would be interested in seeing this code once things were working.\r\n> \"Nition\" would you be willing to post it? Thanks in adv","subject":"Re: SerialPortEventListener in Javascript"}},
{"id":"msg!cmhpbm8jMTU=!message","key":"message","value":"1-4009593770","doc":{"_id":"msg!cmhpbm8jMTU=!message","_rev":"1-4009593770","body":"On May 29, 8:57\u00a0am, Norris Boyd <norrisb...@gmail.com> wrote:\r\n> On May 28, 6:23 pm, nition <tgad...@gmail.com> wrote:\r\n>\r\n> > Thanks again for the reply, the example with the Thread works indeed.\r\n> > And (maybe a silly question) is the code that is calling the event\r\n> > handler in the java package?\r\n>\r\n> Which event handler? The one from gnu.io.SerialPort.addEventListener?\r\n> I imagine that event handler is called by something in the gnu.io\r\n> package, but I'm not familiar with it.\r\n>\r\n> --N\r\n\r\nI would be interested in seeing this code once things were working.\r\n\"Nition\" would you be willing to post it? Thanks in advance.\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","europe72 <jbader@omnesoft.com>"],"raindrop_seq":1239213493.733394,"type":"message","body_preview":"On May 29, 8:57\u00a0am, Norris Boyd <norrisb...@gmail.com> wrote:\r\n> On May 28, 6:23 pm, nition <tgad...@gmail.com> wrote:\r\n>\r\n> > T","subject":"Re: SerialPortEventListener in Javascript"}},
{"id":"msg!cmhpbm8jMTY=!message","key":"message","value":"1-2785019424","doc":{"_id":"msg!cmhpbm8jMTY=!message","_rev":"1-2785019424","body":"On May 28, 6:23 pm, nition <tgad...@gmail.com> wrote:\r\n> Thanks again for the reply, the example with the Thread works indeed.\r\n> And (maybe a silly question) is the code that is calling the event\r\n> handler in the java package?\r\n\r\nWhich event handler? The one from gnu.io.SerialPort.addEventListener?\r\nI imagine that event handler is called by something in the gnu.io\r\npackage, but I'm not familiar with it.\r\n\r\n--N\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","Norris Boyd <norrisboyd@gmail.com>"],"raindrop_seq":1239213493.733137,"type":"message","body_preview":"On May 28, 6:23 pm, nition <tgad...@gmail.com> wrote:\r\n> Thanks again for the reply, the example with the Thread works indeed.\r\n","subject":"Re: SerialPortEventListener in Javascript"}},
{"id":"msg!cmhpbm8jMw==!message","key":"message","value":"1-3096633722","doc":{"_id":"msg!cmhpbm8jMw==!message","_rev":"1-3096633722","body":"Using Rhino with servlets: I want to do as much initialization and\r\nscript compiling as possible when using Rhino in a servlet\r\nenvironment, to get the best performance. I am using Rhino 1.7R1. I\r\nhave some library JS files that define objects/functions I always want\r\navailable, but there will be specific JS files executed per servlet\r\nrequest.\r\n\r\nRight now I am using a *static block* in a servlet to do\r\nContext.initStandardObjects() and I save the returned Scriptable in a\r\nstatic servlet variable, called topScope, which is used when\r\nprocessing every servlet request. I want to use\r\ntopScope.evaluateString/Reader to execute the library JS files in the\r\nstatic block, since I always want those library objects/functions\r\navailable.\r\n\r\nQuestions:\r\n1) Is it safe to create topScope and call\r\ntopScope.evaluateString/Reader in the static servlet block, then reuse\r\ntopScope for all Servlet requests? I am concerned that when the\r\ncontext exits in the static block, some state information that was on\r\nthat thread will be lost.\r\n\r\n2) Any general concerns about using a static initialization block in\r\nthe servlet? Should I just stick with doing the work mentioned above\r\nin the servlet init method, or even take the hit and do the work for\r\neach servlet request?\r\n\r\nThank you,\r\nJames Burke\r\n","from":["email","\"James Burke\" <jrburke@tagneto.org>"],"raindrop_seq":1239213493.569666,"type":"message","body_preview":"Using Rhino with servlets: I want to do as much initialization and\r\nscript compiling as possible when using Rhino in a servlet\r\n","subject":"Best way to use Rhino with servlets"}},
{"id":"msg!cmhpbm8jMzA=!message","key":"message","value":"1-2214585549","doc":{"_id":"msg!cmhpbm8jMzA=!message","_rev":"1-2214585549","body":"On Jun 8, 12:06 pm, Frank <no-spam...@t-online.de> wrote:\r\n> Hi group,\r\n>\r\n> I'm simply trying to do get the subject's matter running ... and fail. I\r\n> googled 2 pieces for this and both don't work.\r\n>\r\n> Using this:\r\n>\r\n> var tableModel = new AbstractTableModel() {\r\n>      getRowCount: function() { return 2; },\r\n>      getColumnCount: function() { return 2; },\r\n>      getValueAt: function(row, column) {\r\n>          return \"ABC\";\r\n>      }};\r\n>\r\n> var jTable = new JTable(tableModel);\r\n>\r\n> results in this:\r\n>\r\n> Exception in thread \"main\" java.lang.AbstractMethodError:\r\n> adapter1.getColumnCount()I\r\n>          at javax.swing.JTable.createDefaultColumnsFromModel(Unknown Source)\r\n>          at javax.swing.JTable.tableChanged(Unknown Source)\r\n>          at javax.swing.JTable.setModel(Unknown Source)\r\n>          at javax.swing.JTable.<init>(Unknown Source)\r\n>          at javax.swing.JTable.<init>(Unknown Source)\r\n>          at\r\n> sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n>          at\r\n> sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\r\n>          at\r\n> sun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\r\n>          at java.lang.reflect.Constructor.newInstance(Unknown Source)\r\n>          at org.mozilla.javascript.MemberBox.newInstance(MemberBox.java:184)\r\n>          at\r\n> org.mozilla.javascript.NativeJavaClass.constructSpecific(NativeJavaClass.java:274)\r\n>          at\r\n> org.mozilla.javascript.NativeJavaClass.construct(NativeJavaClass.java:193)\r\n>          at\r\n> org.mozilla.javascript.Interpreter.interpretLoop(Interpreter.java:3380)\r\n>          at\r\n> ...\r\n>\r\n> Same error also for:\r\n>\r\n> var tableModel = new JavaAdapter(AbstractTableModel, {\r\n>      getRowCount: function() { return 2; },\r\n>      getColumnCount: function() { return 2; },\r\n>      getValueAt: function(row, column) {\r\n>          return \"ABC\";\r\n>      }});\r\n>\r\n> var jTable = new JTable(tableModel);\r\n>\r\n> Any help is appreciated.\r\n>\r\n> Thanks in advance, Frank\r\n>\r\n> Btw.: thanks also for the great work with Rhino!\r\n\r\nThis looks like a bug. I've created https://bugzilla.mozilla.org/show_bug.cgi?id=437988\r\nand will try to look at it soon.\r\n\r\n--N\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","Norris Boyd <norrisboyd@gmail.com>"],"raindrop_seq":1239213493.788943,"type":"message","body_preview":"On Jun 8, 12:06 pm, Frank <no-spam...@t-online.de> wrote:\r\n> Hi group,\r\n>\r\n> I'm simply trying to do get the subject's matter ru","subject":"Re: Extending AbstractTableModel in Rhino1_7R1"}},
{"id":"msg!cmhpbm8jMzc=!message","key":"message","value":"1-2148879510","doc":{"_id":"msg!cmhpbm8jMzc=!message","_rev":"1-2148879510","body":"it appears that a Java method with boolean arguments, e.g.\r\n\r\npublic void aMethod(boolean x) { ... }\r\n\r\ncannot be invoked from Javascript with a Number, i.e.\r\n\r\naMethod(0);\r\n\r\nthis causes an EvaluatorException: Can't find\r\nmethod ...aMethod(number).\r\n\r\n\r\nI see that NativeJavaMethod::getConversionWeight explicitly disallows\r\nthe case JSTYPE_NUMBER to primitive Boolean.TYPE...\r\n\r\n        case JSTYPE_NUMBER:\r\n            if (to.isPrimitive()) {\r\n                if (to == Double.TYPE) {\r\n                    return 1;\r\n                }\r\n                else if (to != Boolean.TYPE) {\r\n                    return 1 + getSizeRank(to);\r\n                }\r\n            }\r\n\r\nwhat is the rationale for disallowing the conversion of a Number to a\r\nboolean in order to match a method?\r\n\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","darrel karisch <dkarisch@gmail.com>"],"raindrop_seq":1239213493.787921,"type":"message","body_preview":"it appears that a Java method with boolean arguments, e.g.\r\n\r\npublic void aMethod(boolean x) { ... }\r\n\r\ncannot be invoked from J","subject":"Java method signature matching - Number to boolean"}},
{"id":"msg!cmhpbm8jMzE=!message","key":"message","value":"1-1435285025","doc":{"_id":"msg!cmhpbm8jMzE=!message","_rev":"1-1435285025","body":"Hi group,\r\n\r\nI'm simply trying to do get the subject's matter running ... and fail. I \r\ngoogled 2 pieces for this and both don't work.\r\n\r\n\r\nUsing this:\r\n\r\nvar tableModel = new AbstractTableModel() {\r\n     getRowCount: function() { return 2; },\r\n     getColumnCount: function() { return 2; },\r\n     getValueAt: function(row, column) {\r\n         return \"ABC\";\r\n     }\r\n};\r\nvar jTable = new JTable(tableModel);\r\n\r\n\r\nresults in this:\r\n\r\nException in thread \"main\" java.lang.AbstractMethodError: \r\nadapter1.getColumnCount()I\r\n         at javax.swing.JTable.createDefaultColumnsFromModel(Unknown Source)\r\n         at javax.swing.JTable.tableChanged(Unknown Source)\r\n         at javax.swing.JTable.setModel(Unknown Source)\r\n         at javax.swing.JTable.<init>(Unknown Source)\r\n         at javax.swing.JTable.<init>(Unknown Source)\r\n         at \r\nsun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n         at \r\nsun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)\r\n         at \r\nsun.reflect.DelegatingConstructorAccessorImpl.newInstance(Unknown Source)\r\n         at java.lang.reflect.Constructor.newInstance(Unknown Source)\r\n         at org.mozilla.javascript.MemberBox.newInstance(MemberBox.java:184)\r\n         at \r\norg.mozilla.javascript.NativeJavaClass.constructSpecific(NativeJavaClass.java:274)\r\n         at \r\norg.mozilla.javascript.NativeJavaClass.construct(NativeJavaClass.java:193)\r\n         at \r\norg.mozilla.javascript.Interpreter.interpretLoop(Interpreter.java:3380)\r\n         at\r\n...\r\n\r\nSame error also for:\r\n\r\nvar tableModel = new JavaAdapter(AbstractTableModel, {\r\n     getRowCount: function() { return 2; },\r\n     getColumnCount: function() { return 2; },\r\n     getValueAt: function(row, column) {\r\n         return \"ABC\";\r\n     }\r\n});\r\nvar jTable = new JTable(tableModel);\r\n\r\n\r\nAny help is appreciated.\r\n\r\nThanks in advance, Frank\r\n\r\n\r\nBtw.: thanks also for the great work with Rhino!\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","Frank <no-spam-27@t-online.de>"],"raindrop_seq":1239213493.788474,"type":"message","body_preview":"Hi group,\r\n\r\nI'm simply trying to do get the subject's matter running ... and fail. I \r\ngoogled 2 pieces for this and both don't","subject":"Extending AbstractTableModel in Rhino1_7R1"}},
{"id":"msg!cmhpbm8jMzg=!message","key":"message","value":"1-2253136230","doc":{"_id":"msg!cmhpbm8jMzg=!message","_rev":"1-2253136230","body":"On Jun 10, 2:49 am, \"cjcruz...@gmail.com\" <cjcruz...@gmail.com> wrote:\r\n> Hi,\r\n>\r\n> I like to use Rhino to parse a JS file and insert statement at the\r\n> beginning and end of a function.\r\n>\r\n> e.g\r\n>\r\n> myFunction() {\r\n>  doSomething();\r\n>\r\n> }\r\n>\r\n> is converted to\r\n>\r\n> myFunction() {\r\n>  trace.start('myFunction');\r\n>  doSomething();\r\n>  trace.end('myFunction');\r\n>\r\n> }\r\n>\r\n> Is it possible using Rhino?\r\n>\r\n> Thanks.\r\n\r\nWhat you want is called \"around\" advice in Aspect Oriented\r\nProgramming. You can implement it pretty easily in JavaScript:\r\n\r\nfunction doSomething(str) {\r\n   print(\"in doSomething(): \" + str);\r\n}\r\n\r\n// function replaces original function with a wrapper\r\nfunction wrap(funcName) {\r\n    var func = this[funcName];\r\n    this[funcName] = function() {\r\n        print(\"trace start\");\r\n        func.apply(this, arguments);\r\n        print(\"trace stop\");\r\n    }\r\n}\r\n\r\n// call original function\r\ndoSomething(\"foo\");\r\n// wrap\r\nwrap(\"doSomething\");\r\n// call wrapped function\r\ndoSomething(\"foo\");\r\n\r\nOf course, Rhino allows you to do the same in Java, but I guess it's\r\neasier in JavaScript.\r\n\r\nhannes\r\n_______________________________________________\r\ndev-tech-js-engine-rhino mailing list\r\ndev-tech-js-engine-rhino@lists.mozilla.org\r\nhttps://lists.mozilla.org/listinfo/dev-tech-js-engine-rhino\r\n","from":["email","Hannes Wallnoefer <hannesw@gmail.com>"],"raindrop_seq":1239213493.788709,"type":"message","body_preview":"On Jun 10, 2:49 am, \"cjcruz...@gmail.com\" <cjcruz...@gmail.com> wrote:\r\n> Hi,\r\n>\r\n> I like to use Rhino to parse a JS file and i","subject":"Re: Inserting staments at the beginning and end of functions"}}
]}
