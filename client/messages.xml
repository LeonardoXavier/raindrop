<?xml version="1.0" encoding="UTF-8"?>
<xbl:xbl
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:xbl="http://www.w3.org/ns/xbl">

  <xbl:binding id="message">
    <xbl:template>
      <div>
        <span id="subject"></span><br/>
        <pre id="body"></pre>
      </div>
    </xbl:template>
    <xbl:implementation><![CDATA[
      ({
        setMessage: function(aMessage) {
          this._message = aMessage;
          this.getElementById("subject").textContent = this._message.headers.Subject;
          this.getElementById("body").textContent = this._message.bodyPart.data;
        },
        xblBindingAttached: function() {
          console.log("Message XBL binding attached!");
          if (this._message) {
            console.log("message exists, doing stuff!");
            this.message = this._message;
          }
        }
      })
    ]]></xbl:implementation>
    <xbl:handlers>
      <xbl:handler event="click"><![CDATA[
      
      ]]></xbl:handler>
    </xbl:handlers>
  </xbl:binding>
</xbl:xbl>
